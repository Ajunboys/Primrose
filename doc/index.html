<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A WebVR application framework."/>
    <meta name="keywords" content="WebGL, WebVR, HTML5, JavaScript, text editor, source code editor, virtual reality, Primrose"/>
    <meta property="og:type" content="website"/>
    <meta property="og:site_name" content="Primrose VR"/>
    <meta property="og:url" content="http://www.primrosevr.com/"/>
    <meta property="og:title" content="Primrose VR"/>
    <meta property="og:image" content="http://www.primrosevr.com/images/screenshot.jpg" />
    <meta property="og:description" content="Primrose: Framework for WebVR Applications"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:site" content="@Sean_McBeth"/>
    <meta name="twitter:title" content="Primrose VR"/>
    <meta name="twitter:description" content="Primrose: Framework for WebVR Applications"/>
    <meta name="twitter:image" content="http://www.primrosevr.com/images/screenshot.jpg"/>
    <title>Primrose VR: WebVR Application Framework Documentation</title>
    <link rel="stylesheet" type="text/css" href="style.min.css">
    <script type="text/javascript" src="/bin/ga.min.js" async defer></script>
    <script type="text/javascript">window.fnames = [ "EMAIL", "FNAME", "LNAME" ];
      window.ftypes = [ "email", "text", "text" ];
      window.addEventListener( "load", function () {
        ga( "send", "pageview" );
      }, false );</script>
    <script type="text/javascript" src="/bin/loader.min.js" async defer></script>
  </head>
  <body>
    <header role="banner">
      <a href="/index.html" id="logo">
        <img src="/images/primrose32.png" alt="logo" title="Primrose logo">
      </a>

      <nav role="navigation">
        <ul>
          <li><a href="/index.html#intro">intro/</a></li>
          <li><a href="/index.html#webvr">webvr/</a></li>
          <li><a href="/doc/">doc/</a></li>
          <li><a href="/index.html#dev">download/</a></li>
          <li><a href="/index.html#team">team/</a></li>
          <li><a href="/index.html#mail">contact/</a></li>
          <li><a href="https://github.com/capnmidnight/Primrose/" target="_blank">src/</a></li>
        </ul>
      </nav>
    </header>
    <main>
      <script type="text/javascript">!function ( d, q, w, a, m, h ) {
        m = d[q]( "main" );
        h = d[q]( "header" );
        function r () {
          m.style.top = h.clientHeight + 1 + "px";
        }
        w[a]( "resize", r, false );
        w[a]( "load", r, false );
        r();
      }( document, "querySelector", this, "addEventListener" );</script>
      <div id="top"></div>
      <div id="contents">
        <h1><a href="/doc/">Primrose VR</a></h1>
        <input type="search" id="docSearch" placeholder="Filter">
        <details open>
          <summary>Table of contents</summary>
          <nav>
            <ul>
              <li>
                <h2>GitHub</h2>
                <ul>
                  <li><a href="https://www.github.com/capnmidnight/Primrose" target="_blank">Source code</a></li>
                  <li><a href="https://www.github.com/capnmidnight/Primrose/issues" target="_blank">Issues</a></li>
                </ul>
              </li>
            </ul>
          </nav>
        </details>
      </div>
      <div id="documentation">
        <h2>Documentation</h2>
        <p>
          Welcome to the documentation page for Primrose VR, a rapid application 
          development framework for WebVR. If you're looking for the source code, 
          or a list of issues, you can find them at <a href="https://www.github.com/capnmidnight/Primrose" target="_blank">
            the GitHub repository.</a>
        </p>
        <p>
          This documentation page is still a massive work in progress. There are
          only a few documented modules here, while we work to build out the full
          documentation package. Please check back at the end of January, 2016,
          at which time much more of the documentation should be complete.
        </p>
        <p>
          Documentation in Primrose is recorded via explicit function calls, rather
          than the JavaDoc-style of parsing comment blocks. The documentation pages
          are built loading the production Primrose library itself and querying 
          its documentation database live. New code features and documentation for
          them are delivered in one cohesive package.
        </p>
        <aside>
          NOTE: documentation descriptions support a limited subset of 
          Markdown. Specifically, none of the shortcuts for the link/image syntax
          are supported, nor are bolding, underlining, or italicizing. However, HTML
          is supported inline. It also supports double-back-ticks (<kbd>``example``</kbd>)
          for specifying blocks of code, rather than using whitespace indenting rules.
        </aside>
        <h2>
          Example:
        </h2>
        <pre>pliny.theElder.function( "Primrose.HTTP", {
  name: "XHR",
  description: "Wraps up the XMLHttpRequest object into a workflow that is easier for me to handle: a single function call. Can handle both GETs and POSTs, with or  without a payload.",
  parameters: [
    {name: "method", type: "String", description: "The HTTP Verb being used for the request."},
    {name: "type", type: "String", description: "How the response should be interpreted. Defaults to \"text\". \"json\", \"arraybuffer\", and other values are also available. See the ref#[1]."},
    {name: "url", type: "String", description: "The resource to which the request is being sent."},
    {name: "data", type: "Object", description: "The data object to use as the request body payload, if this is a PUT request."},
    {name: "success", type: "Function", description: "(Optional) the callback to issue whenever the request finishes successfully, even going so far as to check HTTP status code on the OnLoad event."},
    {name: "error", type: "Function", description: "(Optional) the callback to issue whenever an error occurs."},
    {name: "progress", type: "Function", description: "(Optional) A callback function to be called as the download from the server progresses."}
  ],
  examples: [ {
      name: "Make a GET request.",
      description: "Typically, you would use one of the other functions in the Primrose.HTTP namespace, but the XHR function is provided as a fallback in case those others do not meet your needs.\n\
\n\
Code:\n\
``Primrose.HTTP.XHR(\"GET\", \"json\", \"localFile.json\",\n\
console.log.bind(console, \"done\"),\n\
console.error.bind(console),\n\
console.log.bind(console, \"progress\"));``\n\
Results:\n\
``Object {field1: 1, field2: \"Field2\"}``"}
  ],
  references: [
    {name: "MDN - XMLHttpRequest - responseType", description: "https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#xmlhttprequest-responsetype"}
  ]
} );
HTTP.XHR = function ( method, type, url, data, success, error, progress ) {
  var xhr = new XMLHttpRequest();
  xhr.onerror = error;
  xhr.onabort = error;
  xhr.onprogress = progress;
  xhr.onload = function () {
    // The other error events are client-errors. If there was a server error,
    // we'd find out about it during this event. We need to only respond to
    // successful requests, i.e. those with HTTP status code in the 200 or 300
    // range.
    if ( xhr.status < 400 ) {
      if ( success ) {
        success( xhr.response );
      }
    }
    else if ( error ) {
      error();
    }
  };

  // The order of these operations is very explicit. You have to call open
  // first. It seems counter intuitive, but think of it more like you're opening
  // an HTTP document to be able to write to it, and then you finish by sending
  // the document. The "open" method does not refer to a network connection.
  xhr.open( method, url );
  if ( type ) {
    xhr.responseType = type;
  }
  if ( data ) {
    // We could do other data types, but in my case, I'm probably only ever
    // going to want JSON. No sense in overcomplicating the interface for
    // features I'm not going to use.
    xhr.setRequestHeader( "Content-Type", "application/json;charset=UTF-8" );
    xhr.send( JSON.stringify( data ) );
  }
  else {
    xhr.send();
  }
};</pre>
        <p>
          With the documentation being built in to the Primrose library itself, 
          the latest documentation is always accessible from code, even during
          live-programming sessions, both in your scripts and in your browser'
          s developer console.
        </p>
        <p>
          If you ever have a question about how a function works, you can pop open
          the console and type in a query to the documentation database with the
          object's full-qualified name. For example, to read back the documentation
          specified above, we would type <kbd>pliny.theYounger("Primrose.HTTP.XHR")</kbd>.
          Alternatively, many types of objects (namespaces, functions, classes, enumerations),
          have a convenience function added to them to display their own help file,
          e.g. <kbd>Primrose.HTTP.XHR.help()</kbd>.
        </p>
        <pre>[function] Primrose.HTTP.XHR([String] method, [String] type, [String] url, [Object] data, [Function] success, [Function] error, [Function] progress)

	parent: Primrose.HTTP

	Wraps up the XMLHttpRequest object into a workflow that is easier for me to handle: a single function call. Can handle both GETs and POSTs, with or  without a payload.

	parameters:
		0: [String] method - The HTTP Verb being used for the request.
		1: [String] type - How the response should be interpreted. Defaults to "text". "json", "arraybuffer", and other values are also available. See the ref#[1].
		2: [String] url - The resource to which the request is being sent.
		3: [Object] data - The data object to use as the request body payload, if this is a PUT request.
		4: [Function] success - (Optional) the callback to issue whenever the request finishes successfully, even going so far as to check HTTP status code on the OnLoad event.
		5: [Function] error - (Optional) the callback to issue whenever an error occurs.
		6: [Function] progress - (Optional) A callback function to be called as the download from the server progresses.

	references:
		0: MDN - XMLHttpRequest - responseType - https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest#xmlhttprequest-responsetype

	examples:
		0: Make a GET request. - Typically, you would use one of the other functions in the Primrose.HTTP namespace, but the XHR function is provided as a fallback in case those others do not meet your need...</pre>
      </div>
    </main>
    <div id="loading">
      Loading...
      <div id="progressBar">Loading...</div>
    </div>
  </body>
</html>
