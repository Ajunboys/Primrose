extends withFramework.jade

block viewport
  meta(name="viewport", content="width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no")

append head
  <!-- start demo.jade head append -->
  link(type="text/css", rel="stylesheet", href=debug ? "/stylesheets/main.css" : "/stylesheets/main.min.css")
  link(type="text/css", rel="stylesheet", href= debug ? "../style.css" : "../style.min.css")
  style(type="text/css") body{background-image:url(screenshot.jpg);}
  <!-- end demo.jade head append -->

block banner
  <!-- start demo.jade banner block -->
  canvas#frontBuffer
  #controls
    button#viewSource(type="button", style="display:none") View source
    button#goVR(type="button"): img(src="/images/cardboard64.png", alt="icon")
    button#goRegular(type="button"): img(src="/images/fullscreen64.png", alt="icon")
  <!-- end demo.jade banner block -->

append footer
  script(type="text/javascript").
    if (window.self !== window.top) { document.querySelector("header").style.display = "none"; }
    app.setFullScreenButton("goVR", "click", true);
    app.setFullScreenButton("goRegular", "click", false);
    document.querySelector("#viewSource").addEventListener("click", function () {
      var path = "https://github.com/capnmidnight/Primrose/tree/master" + document.location.pathname;
      path = path.replace(/\/(index.html)?(#fullscreen)?$/, "/app.js");
      window.open(path);
    }, false);